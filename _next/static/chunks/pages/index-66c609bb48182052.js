(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{1896:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(7876),l=a(4232),n=a(3722);let o=e=>{let{data:t,width:a=600,height:o=400}=e,s=(0,l.useRef)(null),i=n.UMr().domain(Array.from(new Set(t.map(e=>e.locName)))).range(n.t55);return(0,l.useEffect)(()=>{if(!t||0===t.length)return;let e=n.Ltv(s.current);e.selectAll("*").remove();let r={top:20,right:30,bottom:40,left:100},l=a-r.left-r.right,c=o-r.top-r.bottom,d=n.m4Y().domain([0,n.T9B(t,e=>e.howMany)]).nice().range([0,l]),p=n.WH().domain(t.map(e=>e.locName)).range([0,l]).padding(.1),u=e.append("g").attr("transform","translate(".concat(r.left,",").concat(r.top,")"));u.append("g").call(n.V4s(p)),u.append("g").attr("transform","translate(0,".concat(c,")")).call(n.l78(d)),u.selectAll("rect").data(t).enter().append("rect").attr("x",0).attr("y",e=>p(e.locName)).attr("height",p.bandwidth()).attr("width",e=>d(e.howMany)).attr("fill",e=>i(e.comName))},[t,a,o]),(0,r.jsx)("svg",{ref:s,width:a,height:o})}},2052:(e,t,a)=>{"use strict";a.d(t,{K:()=>n});var r=a(7876),l=a(4232);let n=e=>{let{options:t,selected:a,onChange:n,label:o}=e,[s,i]=(0,l.useState)(""),c=e=>{n(a.includes(e)?a.filter(t=>t!==e):[...a,e])},d=t.filter(e=>e.toLowerCase().includes(s.toLowerCase()));return(0,r.jsxs)("div",{children:[o&&(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:o})}),(0,r.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),placeholder:"Pesquise uma op\xe7\xe3o",style:{marginBottom:"10px",padding:"5px",width:"100%"}}),""!==s.trim()&&(0,r.jsx)("ul",{style:{listStyle:"none",padding:0},children:d.map(e=>(0,r.jsx)("li",{children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",value:e,checked:a.includes(e),onChange:()=>c(e)})," ",e]})},e))})]})}},5098:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(7876),l=a(4232),n=a(3722);let o=e=>{let{width:t=800,height:a=450,geoData:o,points:s=[],onBrushSelection:i}=e,c=(0,l.useRef)(null),[d,p]=l.useState(!1),[u,h]=l.useState(!1),[m,f]=l.useState(!1),g=n.UMr().domain(Array.from(new Set(s.map(e=>e.comName)))).range(n.t55);return(0,l.useEffect)(()=>{h(!0);let e=n.Ltv(c.current);e.selectAll("path").remove(),e.selectAll("circle").remove();let r=n.Ltv(c.current.parentElement).append("div").style("position","absolute").style("background","white").style("padding","5px 10px").style("border","1px solid #999").style("border-radius","4px").style("pointer-events","none").style("opacity",0),l=d?n.uVR().scale(Math.min(t,a)/2.2).translate([t/2,a/2]):n.WK6().scale(Math.min(t,a)/2.2).translate([t/2,a/2]);if(!o)return;let p=n.zFW().projection(l);e.append("defs").append("clipPath").attr("id","globeClip").append("path").datum({type:"Sphere"}).attr("d",p);let u=e.append("g"),x=!1,v=null,y=e=>{e.preventDefault();let t=e.deltaY<0?1.1:.9,a=l.scale();l.scale(a*t),w()},b=e=>{if(!x||!v)return;let[t,a]=v,r=e.clientX-t,n=e.clientY-a,o=l.rotate();l.rotate([o[0]+.25*r,o[1]-.25*n,o[2]]),v=[e.clientX,e.clientY],w()},w=()=>{j.attr("d",p({type:"Sphere"})),u.selectAll("path.country").data(o.features).join(e=>e.append("path").attr("class","country").attr("d",p).attr("fill","#ffddcc").attr("stroke","#fff"),e=>e.attr("d",p),e=>e.remove());let[e,t]=l.rotate(),a=[-e,-t],i=s.filter(e=>n.Je2([e.lng,e.lat],a)<=Math.PI/2);u.selectAll("circle").data(i).join(e=>e.append("circle").attr("cx",e=>l([e.lng,e.lat])[0]).attr("cy",e=>l([e.lng,e.lat])[1]).attr("r",e=>2*Math.sqrt(e.howMany)).attr("fill","red").attr("opacity",.5).attr("fill",e=>g(e.comName)).on("mouseover",(e,t)=>{r.html("<strong>Esp\xe9cie:</strong> ".concat(t.comName,"<br/><strong>Quantidade:</strong> ").concat(t.howMany)).style("opacity",1).style("visibility","visible")}).on("mousemove",e=>{r.style("left","".concat(e.pageX+10,"px")).style("top","".concat(e.pageY-28,"px"))}).on("mouseout",()=>{r.style("opacity",0)}),e=>e.attr("cx",e=>l([e.lng,e.lat])[0]).attr("cy",e=>l([e.lng,e.lat])[1]),e=>e.remove())};e.on("wheel",e=>{e.preventDefault();let t=e.deltaY<0?1.1:.9,a=l.scale();l.scale(a*t),w()}),e.on("mousedown",e=>{x=!0,v=[e.clientX,e.clientY],e.preventDefault()}),e.on("mousemove",e=>{if(!x||!v)return;let[t,a]=v,r=e.clientX-t,n=e.clientY-a,o=l.rotate();l.rotate([o[0]+.25*r,o[1]-.25*n,o[2]]),v=[e.clientX,e.clientY],w()}),n.Ltv(window).on("mouseup",()=>{x&&(x=!1,v=null)}),n.Ltv(window).on("mouseleave",()=>{x&&(x=!1,v=null)});let j=u.append("path").datum({type:"Sphere"}).attr("fill","#aadaff");w(),u.selectAll("path.country").data(o.features).enter().append("path").attr("class","country").attr("d",p).attr("fill","#ffddcc").attr("stroke","#fff");let N=n.V$7().extent([[0,0],[t,a]]).on("start",()=>{f(!0),e.on("wheel",null),e.on("mousedown",null)}).on("end",r=>{if(!r.selection){f(!1);return}if("function"!=typeof l.invert){console.warn("Projection does not support invert.");return}let[[n,o],[s,c]]=r.selection,d=l.invert([n,o]),p=l.invert([s,c]);if(console.log("p0",d,"p1",p),!d||!p){console.log("Sele\xe7\xe3o fora da esfera, ignorando.");return}i&&i([[d[0],d[1]],[p[0],p[1]]]);let u=(d[0]+p[0])/2,h=(d[1]+p[1])/2,m=Math.min(t,a)/Math.max(Math.abs(s-n),Math.abs(c-o))*l.scale()*.5;l.scale(m),l.rotate([-u,-h]),w(),i&&i([d,p]),f(!1),e.on("wheel",y),e.on("mousedown",b)});return m?(e.select(".brush").remove(),e.append("g").attr("class","brush").call(N)):e.select(".brush").remove(),()=>{r.remove()}},[o,t,a,s,i,d]),(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)("svg",{ref:c,width:t,height:a,style:{cursor:"grab",backgroundColor:"#000"}}),u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>p(e=>!e),style:{position:"absolute",top:10,right:10,padding:"8px 12px",backgroundColor:"#4dabf7",border:"none",borderRadius:"8px",color:"#fff",cursor:"pointer"},children:d?"Voltar ao globo":"Flatten globe"}),(0,r.jsx)("button",{onClick:()=>{f(e=>!e)},style:{position:"absolute",top:50,right:10,padding:"8px 12px",backgroundColor:"#82c91e",border:"none",borderRadius:"8px",color:"#fff",cursor:"pointer"},children:m?"Desabilitar Brush":"Habilitar Brush"})]})]})}},6760:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(9306)}])},9306:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{__N_SSG:()=>h,default:()=>m});var l=a(7876),n=a(4939),o=a(2052),s=a(4232),i=a(9833),c=a(5098),d=a(1896),p=a(5198),u=e([i]);i=(u.then?(await u)():u)[0];var h=!0;function m(e){let{global_data:t}=e,[a,r]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[m,f]=(0,s.useState)(null),g=(0,s.useMemo)(()=>t.filter(e=>a.includes(e.comName)),[a,t]);console.log("filteredOptions",g),(0,s.useEffect)(()=>{f(p),u.length>0&&console.log("Usando dados filtrados fora do handleBrush:",u)},[u]);let x=(0,s.useCallback)(e=>{if(!e){h([]);return}let[[t,a],[r,l]]=e,n=Math.min(t,r),o=Math.max(t,r),s=Math.min(a,l),i=Math.max(a,l),c=u.filter(e=>{let t=e.lng,a=e.lat;return t>=n&&t<=o&&a>=s&&a<=i});h(c)},[u]);return console.log("geoData",u),(0,l.jsxs)("div",{children:[(0,l.jsx)(n.A,{}),(0,l.jsx)("div",{className:"bg-white-100 p-4 max-h-60 overflow-auto",children:(0,l.jsx)(o.K,{options:i.id,selected:a,onChange:r,label:"Select options"})}),(0,l.jsx)("div",{className:"bg-white-100 p-4 max-h-60 overflow-auto",children:a.length>0?(0,l.jsxs)("div",{className:"p-4",children:[(0,l.jsx)("h2",{className:"text-lg font-bold mb-2",children:"Selecionados:"}),(0,l.jsx)("ul",{className:"list-none p-0",children:a.map(e=>(0,l.jsx)("li",{className:"mb-2 flex items-center",children:(0,l.jsx)("button",{onClick:()=>{let t=a.filter(t=>t!==e);r(t)},className:"ml-2 px-2 py-1 bg-red-500 text-white rounded hover:bg-red-600",children:e})},e))})]}):(0,l.jsx)("p",{className:"p-4",children:"Nenhum selecionado"})}),(0,l.jsxs)("div",{className:"grid grid-cols-[70%_30%] w-full h-screen",children:[(0,l.jsx)("div",{className:"bg-white-100 p-4",children:(0,l.jsx)(c.A,{geoData:m,points:g,onBrushSelection:x})}),(0,l.jsx)("div",{className:"bg-yellow-100 p-4",children:(0,l.jsx)(d.A,{data:g})})]})]})}r()}catch(e){r(e)}})},9833:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{id:()=>h});var l=a(7085),n=a.n(l),o=a(1040),s=a(5364);o.A.get("http://exemplo.com",{timeout:1e5}).then(e=>console.log(e.data)).catch(e=>console.error(e));let e=await p("https://api.ebird.org/v2/ref/taxonomy/ebird");await d("https://api.ebird.org/v2/ref/region/list/country/world");let h=await i(e,"COMMON_NAME");async function i(e,t){return[...new Set(e.data.map(e=>e[t]))]}async function c(e){var t;return null!==(t=e.meta.fields)&&void 0!==t?t:[]}async function d(e){let t=await fetch(e,{headers:{"X-eBirdApiToken":s.env.EB_TOKEN}});return t.ok?await t.json():(console.error("Erro na resposta da API: ".concat(t.status)),u())}async function p(e){let t=await fetch(e,{headers:{"X-eBirdApiToken":s.env.EB_TOKEN}});if(!t.ok)return console.error("Erro na resposta da API: ".concat(t.status)),u();let a=await t.text();return n().parse(a,{header:!0,skipEmptyLines:!0})}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{data:[],errors:e,meta:{delimiter:"",linebreak:"",aborted:!1,truncated:!1,cursor:0}}}await c(e),r()}catch(e){r(e)}},1)}},e=>{var t=t=>e(e.s=t);e.O(0,[230,722,172,244,636,593,792],()=>t(6760)),_N_E=e.O()}]);