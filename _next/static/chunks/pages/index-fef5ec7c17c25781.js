(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{6760:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(7502)}])},7502:(e,t,l)=>{"use strict";l.r(t),l.d(t,{__N_SSG:()=>h,default:()=>m});var a=l(7876),n=l(4939),s=l(4232);let r=e=>{let{options:t,selected:l,onChange:n,label:r}=e,[o,i]=(0,s.useState)(""),c=e=>{n(l.includes(e)?l.filter(t=>t!==e):[...l,e])},d=t.filter(e=>e.toLowerCase().includes(o.toLowerCase()));return(0,a.jsxs)("div",{children:[r&&(0,a.jsx)("p",{children:(0,a.jsx)("strong",{children:r})}),(0,a.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),placeholder:"Pesquise uma op\xe7\xe3o",style:{marginBottom:"10px",padding:"5px",width:"100%"}}),""!==o.trim()&&(0,a.jsx)("ul",{style:{listStyle:"none",padding:0},children:d.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",value:e,checked:l.includes(e),onChange:()=>c(e)})," ",e]})},e))})]})};var o=l(4515),i=l(754);let c=e=>{let{data:t,width:l=600,height:n=400,color:r}=e,o=(0,s.useRef)(null),c=r||i.UMr(i.t55);return(0,s.useEffect)(()=>{if(!t||0===t.length)return;let e=i.Ltv(o.current);e.selectAll("*").remove();let a={top:20,right:30,bottom:40,left:100},s=l-a.left-a.right,r=n-a.top-a.bottom,d=i.m4Y().domain([0,i.T9B(t,e=>e.howMany)]).nice().range([0,s]),h=i.WH().domain(t.map(e=>e.locName)).range([0,s]).padding(.1),m=e.append("g").attr("transform","translate(".concat(a.left,",").concat(a.top,")"));m.append("g").call(i.V4s(h)),m.append("g").attr("transform","translate(0,".concat(r,")")).call(i.l78(d)),m.selectAll("rect").data(t).enter().append("rect").attr("x",0).attr("y",e=>h(e.locName)).attr("height",h.bandwidth()).attr("width",e=>d(e.howMany)).attr("fill",e=>c(e.comName))},[t,l,n]),(0,a.jsx)("svg",{ref:o,width:l,height:n})};var d=l(5198),h=!0;function m(e){let{global_data:t,list_visible:l}=e,[h,m]=(0,s.useState)([]),[u,p]=(0,s.useState)([]),[g,x]=(0,s.useState)(null),f=(0,s.useMemo)(()=>t.filter(e=>h.includes(e.comName)),[h,t]),j=i.UMr().domain(Array.from(new Set(l.map(e=>e.comName)))).range(i.t55);(0,s.useEffect)(()=>{x(d),u.length>0&&console.log("Usando dados filtrados fora do handleBrush:",u)},[u]);let w=(0,s.useCallback)(e=>{if(!e){p([]);return}let[[t,l],[a,n]]=e;console.log(e);let s=Math.min(t,a),r=Math.max(t,a),o=Math.min(l,n),i=Math.max(l,n),c=f.filter(e=>{let t=e.lng,l=e.lat;return t>=s&&t<=r&&l>=o&&l<=i});console.log(c),p(c)},[f]);return console.log("geoData",u),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("div",{className:"bg-white-100 p-4 max-h-60 overflow-auto",children:(0,a.jsx)(r,{options:l,selected:h,onChange:m,label:"Select options"})}),(0,a.jsx)("div",{className:"bg-white-100 p-4 max-h-60 overflow-auto",children:h.length>0?(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-2",children:"Selecionados:"}),(0,a.jsx)("ul",{className:"list-none p-0",children:h.map(e=>(0,a.jsx)("li",{className:"mb-2 flex items-center",children:(0,a.jsx)("button",{onClick:()=>{m(h.filter(t=>t!==e))},style:{backgroundColor:j(e)},className:"ml-2 px-2 py-1 bg-red-500 text-white rounded hover:bg-600",children:e})},e))})]}):(0,a.jsx)("p",{className:"p-4",children:"Nenhum selecionado"})}),(0,a.jsxs)("div",{className:"grid grid-cols-[70%_30%] w-full h-screen",children:[(0,a.jsx)("div",{className:"bg-white-100 p-4",children:(0,a.jsx)(o.A,{geoData:g,points:f,onBrushSelection:w})}),(0,a.jsx)("div",{className:"bg-yellow-100 p-4",children:(0,a.jsx)(c,{data:u.length>0?u:f,color:j})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[230,754,578,636,593,792],()=>t(6760)),_N_E=e.O()}]);