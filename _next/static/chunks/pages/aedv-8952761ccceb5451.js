(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156],{1487:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>m});var a=r(7876),l=r(4232),n=r(3722);function o(){let t=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(!t.current)return;let e=n.Ltv(t.current);e.selectAll("*").remove(),e.append("circle").attr("cx",150).attr("cy",70).attr("r",50).attr("fill","steelblue")},[]),(0,a.jsx)("div",{className:"flex justify-center mt-10",children:(0,a.jsx)("svg",{ref:t,width:300,height:150})})}var s=r(4939);let c=t=>{let{width:e=800,height:r=450,geoData:o,points:s=[],onBrushSelection:c}=t,u=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(console.log("GeoData recebido no WorldMap:",o),!o)return;let t=n.Ltv(u.current);t.selectAll("path").remove(),t.selectAll("circle").remove();let a=t.append("g"),l=n.bAh().fitSize([e,r],o),i=n.zFW().projection(l);a.selectAll("path").data(o.features).enter().append("path").attr("d",t=>i(t)||"").attr("fill","#4dabf7").attr("stroke","#fff"),a.selectAll("circle").data(s).enter().append("circle").attr("cx",t=>l([t.lng,t.lat])[0]).attr("cy",t=>l([t.lng,t.lat])[1]).attr("r",t=>2*Math.sqrt(t.howMany)).attr("fill","red").attr("opacity",.1);let d=n.s_O().scaleExtent([1,8]).on("zoom",t=>{a.attr("transform",t.transform)});t.call(d);let f=n.V$7().extent([[0,0],[e,r]]).on("end",a=>{if(!a.selection)return;let[[o,s],[i,f]]=a.selection,v=n._V(t.node()),[[p,m],[g,h]]=[v.invert([o,s]),v.invert([i,f])],x=Math.min(e/(g-p),r/(h-m)),y=[e/2-x*(p+(g-p)/2),r/2-x*(m+(h-m)/2)];if(u.current&&n.Ltv(u.current).call(d.transform,n.GSI.translate(y[0],y[1]).scale(x)),"function"!=typeof l.invert){console.warn("Projection does not support invert.");return}let j=null==l?void 0:l.invert([p,m]),w=null==l?void 0:l.invert([g,h]);j&&w&&c&&c([j,w]),t.select(".brush").remove(),t.call(d),n.Ltv(window).on("mouseup.zoom",null)});t.on("contextmenu",e=>{e.preventDefault(),t.select(".brush").remove(),t.on(".zoom",null),t.append("g").attr("class","brush").call(f)})},[o,e,r,s]),(0,a.jsx)("svg",{ref:u,width:e,height:r,style:{cursor:"grab"}})};var u=r(5198),i=r(513);let d=i.z.object({date:i.z.string(),value:i.z.number(),category:i.z.string()}),f=i.z.array(d),v=t=>{let{data:e}=t,r=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let t=f.safeParse(e);if(!t.success){console.error("Dados inv\xe1lidos:",t.error);return}let a=t.data.map(t=>({...t,date:new Date(t.date)})),l=Array.from(new Set(a.map(t=>t.category))),o=l.map(t=>({category:t,values:a.filter(e=>e.category===t)})),s={top:20,right:30,bottom:50,left:50},c=n.Ltv(r.current);c.selectAll("*").remove(),c.attr("width",600).attr("height",400);let u=n.w7C().domain(n.Xxv(a,t=>t.date)).range([s.left,600-s.right]),i=n.m4Y().domain([0,n.T9B(a,t=>t.value)||0]).nice().range([400-s.bottom,s.top]),d=n.UMr().domain(l).range(n.t55),v=n.n8j().x(t=>u(t.date)).y(t=>i(t.value));c.append("g").attr("transform","translate(0,".concat(400-s.bottom,")")).call(n.l78(u).ticks(5).tickFormat(n.DCK("%Y-%m-%d"))).selectAll("text").attr("transform","rotate(-45)").style("text-anchor","end"),c.append("g").attr("transform","translate(".concat(s.left,",0)")).call(n.V4s(i)),o.forEach(t=>{c.append("path").datum(t.values).attr("fill","none").attr("stroke",d(t.category)).attr("stroke-width",2).attr("d",v),c.append("text").attr("x",600-s.right-60).attr("y",i(t.values[t.values.length-1].value)).attr("fill",d(t.category)).text(t.category).style("font-size","12px")})},[e]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("svg",{ref:r})})},p=[{date:"2023-01-01",value:10,category:"A"},{date:"2023-01-01",value:20,category:"B"},{date:"2023-01-02",value:15,category:"A"},{date:"2023-01-02",value:25,category:"B"},{date:"2023-01-03",value:30,category:"A"},{date:"2023-01-03",value:28,category:"B"}];function m(){let[t,e]=(0,l.useState)(null);return(0,l.useEffect)(()=>{e(u)},[]),(0,a.jsxs)("main",{className:"p-8",children:[(0,a.jsx)(s.A,{}),(0,a.jsx)(o,{}),(0,a.jsx)(v,{data:p}),t?(0,a.jsx)(c,{geoData:t}):(0,a.jsx)("p",{children:"Carregando mapa..."}),(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Teste de API"})]})}},9468:(t,e,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/aedv",function(){return r(1487)}])}},t=>{var e=e=>t(t.s=e);t.O(0,[230,722,513,244,636,593,792],()=>e(9468)),_N_E=t.O()}]);